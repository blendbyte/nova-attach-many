(()=>{"use strict";var e,t={537:(e,t,r)=>{const l=Vue;var n={key:0,class:"flex items-center border border-b-0 border-gray-100 dark:border-gray-700"},i={key:0,class:"flex justify-center p-3 w-full"},a={class:"text-xl"},o={key:1,class:"flex items-center w-full"},s={class:"px-3"},c=["placeholder"],h={class:"nam-flex nam-flex-col"},u={key:0},d={key:0},f={key:1},v={key:0},p={key:1},m={key:2};const g=LaravelNova,k={mixins:[g.DependentFormField,g.HandlesValidationErrors],props:["resourceName","resourceId","field"],data:function(){return{search:null,selected:[],selectingAll:!1,available:[],preview:!1,loading:!0}},methods:{setInitialValue:function(){this.retrieveData(),this.currentField.value&&(this.selected=this.currentField.value,Nova.$emit(this.getFieldAttributeValueEventName(this.field.attribute),this.selected))},retrieveData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r="/nova-vendor/nova-attach-many/";this.resourceId?Nova.request(r+this.resourceName+"/"+this.resourceId+"/attachable/"+this.field.attribute).then((function(r){e.selected=t?_.intersection(e.selected,_.map(r.data.available,"value")):r.data.selected||[],e.available=r.data.available||[],e.loading=!1})):Nova.request(r+this.resourceName+"/attachable/"+this.field.attribute).then((function(t){e.available=t.data.available||[],e.loading=!1}))},fill:function(e){e.append(this.field.attribute,this.value||[])},toggle:function(e,t){this.selected.includes(t)?this.selected=this.selected.filter((function(e){return e!=t})):this.selected.push(t),this.field&&Nova.$emit(this.getFieldAttributeValueEventName(this.field.attribute),this.selected)},refresh:function(e){this.loading=!0,this.retrieveData(!0)},selectAll:function(){var e=this.selected;if(this.selectingAll=!this.selectingAll,0!=this.resources.length){if(1==this.resources.length&&1==this.selected&&(this.selected=[]),!this.search&&this.selectingAll&&(e=[],this.resources.forEach((function(t){e.push(t.value)}))),this.search||this.selectingAll||(e=[]),this.search&&this.selectingAll&&this.resources.forEach((function(t){e.push(t.value)})),this.search&&!this.selectingAll){var t=[];this.resources.forEach((function(e){t.push(e.value)})),e=e.filter((function(e){return 0==t.includes(e)}))}this.selected=e}},clearSearch:function(){this.selectingAll=!1,this.search=null},checkIfSelectAllIsActive:function(){var e=this;if(0===this.resources.length||this.preview)this.selectingAll=!1;else{var t=[];this.resources.forEach((function(r){e.selected.includes(r.value)&&t.push(r.value)})),this.selectingAll=t.length==this.resources.length}},togglePreview:function(e){this.preview=!this.preview}},computed:{resources:function(){var e=this;return this.preview?this.available.filter((function(t){return e.selected.includes(t.value)})):null==this.search?this.available:this.available.filter((function(t){return t.display.toLowerCase().includes(e.search.toLowerCase())}))},hasErrors:function(){return this.errors.errors.hasOwnProperty(this.field.attribute)},firstError:function(){return this.errors.errors[this.field.attribute][0]}},watch:{search:{handler:function(e){this.checkIfSelectAllIsActive()}},selected:{handler:function(e){this.value=JSON.stringify(e),this.checkIfSelectAllIsActive()},deep:!0}}};const b=(0,r(262).A)(k,[["render",function(e,t,r,g,k,b){var y=(0,l.resolveComponent)("Checkbox"),w=(0,l.resolveComponent)("loader"),N=(0,l.resolveComponent)("CheckboxWithLabel"),x=(0,l.resolveComponent)("HelpText"),E=(0,l.resolveComponent)("DefaultField");return(0,l.openBlock)(),(0,l.createBlock)(E,{field:e.currentField,"full-width-content":!0,"show-help-text":!1,class:"nova-attach-many"},{field:(0,l.withCtx)((function(){return[(0,l.createElementVNode)("div",{class:(0,l.normalizeClass)(["attach-many-container",{"border-danger border":b.hasErrors}])},[e.currentField.showToolbar?((0,l.openBlock)(),(0,l.createElementBlock)("div",n,[k.preview?((0,l.openBlock)(),(0,l.createElementBlock)("div",i,[(0,l.createElementVNode)("div",a,(0,l.toDisplayString)(e.__("Selected Items"))+" ("+(0,l.toDisplayString)(k.selected.length)+")",1)])):((0,l.openBlock)(),(0,l.createElementBlock)("div",o,[(0,l.createElementVNode)("div",s,[(0,l.createVNode)(y,{onClick:b.selectAll,checked:k.selectingAll,class:"cursor-pointer"},null,8,["onClick","checked"])]),(0,l.withDirectives)((0,l.createElementVNode)("input",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return k.search=e}),type:"search",placeholder:e.__("Search"),class:"w-full form-control form-input form-input-bordered"},null,8,c),[[l.vModelText,k.search]])]))])):(0,l.createCommentVNode)("",!0),(0,l.createElementVNode)("div",{class:"nam-border nam-border-gray-100 nam-dark:border-gray-700 nam-relative nam-overflow-auto",style:(0,l.normalizeStyle)({height:e.currentField.height})},[k.loading?((0,l.openBlock)(),(0,l.createElementBlock)("div",{key:0,class:"nam-flex nam-justify-center",style:(0,l.normalizeStyle)({height:e.currentField.height})},[(0,l.createVNode)(w)],4)):((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,{key:1},(0,l.renderList)(b.resources,(function(t){return(0,l.openBlock)(),(0,l.createBlock)(N,{class:"nam-p-3 nam-cursor-pointer nam-hover:bg-gray-100 nam-dark:hover:bg-gray-700",key:t.value,checked:k.selected.includes(t.value),onInput:function(e){return b.toggle(e,t.value)}},{default:(0,l.withCtx)((function(){return[(0,l.createElementVNode)("div",h,[(0,l.createElementVNode)("div",null,(0,l.toDisplayString)(t.display),1),e.currentField.withSubtitles?((0,l.openBlock)(),(0,l.createElementBlock)("div",u,[t.subtitle?((0,l.openBlock)(),(0,l.createElementBlock)("span",d,(0,l.toDisplayString)(t.subtitle),1)):((0,l.openBlock)(),(0,l.createElementBlock)("span",f,(0,l.toDisplayString)(e.__("No additional information...")),1))])):(0,l.createCommentVNode)("",!0)])]})),_:2},1032,["checked","onInput"])})),128))],4)],2),b.hasErrors?((0,l.openBlock)(),(0,l.createBlock)(x,{key:0,class:"error-text mt-2 text-danger"},{default:(0,l.withCtx)((function(){return[(0,l.createTextVNode)((0,l.toDisplayString)(b.firstError),1)]})),_:1})):(0,l.createCommentVNode)("",!0),(0,l.createElementVNode)("div",{class:(0,l.normalizeClass)(["help-text mt-3 w-full flex justify-between",{invisible:k.loading}])},[e.currentField.showCounts?((0,l.openBlock)(),(0,l.createElementBlock)("span",v,(0,l.toDisplayString)(k.selected.length)+" / "+(0,l.toDisplayString)(k.available.length),1)):(0,l.createCommentVNode)("",!0),e.currentField.helpText?((0,l.openBlock)(),(0,l.createElementBlock)("span",p,[(0,l.createVNode)(x,{class:"help-text"},{default:(0,l.withCtx)((function(){return[(0,l.createTextVNode)((0,l.toDisplayString)(e.currentField.helpText),1)]})),_:1})])):(0,l.createCommentVNode)("",!0),e.currentField.showPreview?((0,l.openBlock)(),(0,l.createElementBlock)("span",m,[(0,l.createVNode)(N,{onInput:t[1]||(t[1]=function(e){return b.togglePreview(e)}),checked:k.preview,class:"cursor-pointer"},{default:(0,l.withCtx)((function(){return[(0,l.createTextVNode)((0,l.toDisplayString)(e.__("Preview")),1)]})),_:1},8,["checked"])])):(0,l.createCommentVNode)("",!0),e.currentField.showRefresh?((0,l.openBlock)(),(0,l.createElementBlock)("span",{key:3,onClick:t[2]||(t[2]=function(e){return b.refresh(e)}),class:"cursor-pointer"},[(0,l.createElementVNode)("span",null,(0,l.toDisplayString)(e.__("Refresh")),1)])):(0,l.createCommentVNode)("",!0)],2)]})),_:1},8,["field"])}]]);Nova.booting((function(e,t){e.component("form-nova-attach-many",b)}))},613:()=>{},262:(e,t)=>{t.A=(e,t)=>{const r=e.__vccOpts||e;for(const[e,l]of t)r[e]=l;return r}}},r={};function l(e){var n=r[e];if(void 0!==n)return n.exports;var i=r[e]={exports:{}};return t[e](i,i.exports,l),i.exports}l.m=t,e=[],l.O=(t,r,n,i)=>{if(!r){var a=1/0;for(h=0;h<e.length;h++){for(var[r,n,i]=e[h],o=!0,s=0;s<r.length;s++)(!1&i||a>=i)&&Object.keys(l.O).every((e=>l.O[e](r[s])))?r.splice(s--,1):(o=!1,i<a&&(a=i));if(o){e.splice(h--,1);var c=n();void 0!==c&&(t=c)}}return t}i=i||0;for(var h=e.length;h>0&&e[h-1][2]>i;h--)e[h]=e[h-1];e[h]=[r,n,i]},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={222:0,101:0};l.O.j=t=>0===e[t];var t=(t,r)=>{var n,i,[a,o,s]=r,c=0;if(a.some((t=>0!==e[t]))){for(n in o)l.o(o,n)&&(l.m[n]=o[n]);if(s)var h=s(l)}for(t&&t(r);c<a.length;c++)i=a[c],l.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return l.O(h)},r=self.webpackChunkblendbyte_nova_attach_many=self.webpackChunkblendbyte_nova_attach_many||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),l.O(void 0,[101],(()=>l(537)));var n=l.O(void 0,[101],(()=>l(613)));n=l.O(n)})();